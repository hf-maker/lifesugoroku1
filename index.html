<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>äººç”Ÿã™ã”ã‚ãï¼ˆå®Œå…¨ç‰ˆãƒ»å®‰å®šï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: sans-serif; background:#f0f9ff; padding:12px }
    h1 { font-size:22px }
    #setup, #game { max-width:520px; margin:auto }
    #board {
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap:6px;
      margin-bottom:12px;
    }
    /* ãã‚‹ãã‚‹é“ï¼ˆå®‰å…¨ç‰ˆï¼‰ */
    .cell:nth-child(10n+6),
    .cell:nth-child(10n+7),
    .cell:nth-child(10n+8),
    .cell:nth-child(10n+9),
    .cell:nth-child(10n+10) {
      direction: rtl;
    }
    .cell { background:white; border-radius:10px; padding:6px; font-size:11px; min-height:70px }
    .icon { font-size:18px }
    .event { font-size:10px }
    .p0{background:#fde68a} .p1{background:#bbf7d0} .p2{background:#bfdbfe} .p3{background:#fbcfe8} .p4{background:#ddd6fe}
    button { padding:10px 16px; border-radius:999px; border:none; background:#2563eb; color:white; font-size:15px }
    input { padding:6px }
    #log { background:white; padding:10px; border-radius:10px; min-height:50px }
    #turn { font-weight:bold; margin-bottom:6px }
  </style>
</head>
<body>

<h1>ğŸ² äººç”Ÿã™ã”ã‚ã</h1>

<div id="setup">
  <p>ä½•äººã§éŠã¶ï¼Ÿï¼ˆ2ã€œ5äººï¼‰</p>
  <input type="number" id="playerCount" min="2" max="5" value="2" /> äºº
  <br><br>
 <button onclick="alert('æŠ¼ã•ã‚ŒãŸã‚ˆ')">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
</div>

<div id="game" style="display:none">
  <p id="turn"></p>
  <div id="board"></div>
  <button id="diceBtn">ã‚µã‚¤ã‚³ãƒ­ã‚’ãµã‚‹</button>
  <div id="diceResult" style="font-size:40px;text-align:center;margin:10px 0;"></div>
  <div id="ending" style="display:none;text-align:center;font-size:18px;margin:10px 0"></div>
  <div id="log"></div>
</div>

<script>
  const START = 20;
  const GOAL = 65;
  const icons = ['ğŸ˜€','ğŸ˜','ğŸ‘§','ğŸ§‘â€ğŸ¦±','ğŸ¤–'];

  const events = {
    21: { icon:'ğŸ', text:'ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’ã‚‚ã‚‰ã†ï¼ãŠé‡‘+5', money:5 },
    23: { icon:'ğŸ“', text:'å¤§å­¦é™¢ã«é€²å­¦ï¼1å›ä¼‘ã¿', skip:1 },
    25: { icon:'ğŸ’¼', text:'æ˜‡é€²ï¼1ãƒã‚¹é€²ã‚€', move:1 },
    27: { icon:'ğŸ§³', text:'å›½å†…æ—…è¡Œï¼1ãƒã‚¹é€²ã‚€', move:1 },
    28: { icon:'âœˆï¸', text:'æµ·å¤–æ—…è¡Œï¼2ãƒã‚¹é€²ã‚€', move:2 },
    30: { icon:'â“', text:'äººç”Ÿã‚¤ãƒ™ãƒ³ãƒˆï¼Ÿ', random:true },
    31: { icon:'ğŸ¤•', text:'ã‘ãŒã‚’ã—ãŸâ€¦1å›ä¼‘ã¿', skip:1 },
    33: { icon:'ğŸ’', text:'çµå©šï¼2ãƒã‚¹é€²ã‚€', move:2 },
    35: { icon:'ğŸš€', text:'è»¢è·æˆåŠŸï¼2ãƒã‚¹é€²ã‚€', move:2 },
    38: { icon:'â˜•', text:'å–«èŒ¶åº—ã‚’çµŒå–¶ï¼ãŠé‡‘+10', money:10 },
    40: { icon:'ğŸ ', text:'å®¶ã‚’è²·ã†ï¼1å›ä¼‘ã¿', skip:1 },
    45: { icon:'ğŸ¯', text:'å®ãã˜å¤§å½“ãŸã‚Šï¼ï¼ãŠé‡‘+30', money:30 },
    48: { icon:'â“', text:'äººç”Ÿã‚¤ãƒ™ãƒ³ãƒˆï¼Ÿ', random:true },
    52: { icon:'â“', text:'äººç”Ÿã‚¤ãƒ™ãƒ³ãƒˆï¼Ÿ', random:true },
    55: { icon:'ğŸ§˜', text:'å¥åº·ã«æ°—ã‚’ã¤ã‘ãŸï¼ãã®ã¾ã¾' },
    60: { icon:'ğŸ§“', text:'å®šå¹´ãŒè¿‘ã„â€¦ãã®ã¾ã¾' },
    64: { icon:'ğŸ‘‘', text:'ç¤¾é•·ã«ãªã‚‹ï¼ï¼ãŠé‡‘+50', money:50 }
  };

  let players = [];
  let current = 0;

  document.getElementById('startBtn').onclick = startGame;
  document.getElementById('diceBtn').onclick = rollDice;

  function startGame() {
    players = [];
    current = 0;
    document.getElementById('log').innerHTML = '';
    document.getElementById('ending').style.display = 'none';
    document.getElementById('diceBtn').disabled = false;

    const count = parseInt(document.getElementById('playerCount').value);
    const icons = ['ğŸ˜€','ğŸ˜','ğŸ‘§','ğŸ§‘','ğŸ¤–'];
    for (let i = 0; i < count; i++) {
      players.push({ icon: icons[i], age: START, skip: 0, money: 10 });
    }
    drawBoard();
    updateTurn();
  });
    }
    current = 0;

    document.getElementById('setup').style.display = 'none';
    document.getElementById('game').style.display = 'block';

    updateTurn();
    drawBoard();
  }

  function drawBoard() {
    const board = document.getElementById('board');
    board.innerHTML = '';

    for (let age = START; age <= GOAL; age++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.innerHTML = `<strong>${age}æ­³</strong>`;

      if (events[age]) {
        cell.innerHTML += `<div class="icon">${events[age].icon}</div>`;
        cell.innerHTML += `<div class="event">${events[age].text}</div>`;
      }

      players.forEach((p, i) => {
        if (p.age === age) {
          const m = document.createElement('div');
          m.className = 'p' + i;
          m.textContent = p.icon;
          cell.appendChild(m);
        }
      });

      board.appendChild(cell);
    }
  }

  function rollDice() {
    const p = players[current];

    if (p.skip > 0) {
      p.skip--;
      showDice('â¸');
      log(p.icon + ' ã¯1å›ä¼‘ã¿');
      nextTurn();
      return;
    }

    const dice = Math.floor(Math.random() * 6) + 1;
    showDice(dice);
    p.age += dice;
    log(p.icon + ' ã¯ ' + dice + ' ãŒå‡ºãŸï¼');

    const e = events[p.age];
    if (e) {
      if (e.random) {
        const r = randomEvents[Math.floor(Math.random()*randomEvents.length)];
        log('â“ ' + r.text);
        if (r.move) p.age += r.move;
        if (r.skip) p.skip = r.skip;
        if (r.money) p.money += r.money;
      } else {
        log(e.text);
        if (e.move) p.age += e.move;
        if (e.skip) p.skip = e.skip;
        if (e.money) p.money += e.money;
      }
    }

    if (p.age >= GOAL) {
      p.age = GOAL;
      log(p.icon + ' ã‚´ãƒ¼ãƒ«ï¼');
      checkGameEnd();
      return;
    }

    drawBoard();
    nextTurn();
  }

  function nextTurn() {
    current = (current + 1) % players.length;
    updateTurn();
  }

  function updateTurn() {
    document.getElementById('turn').textContent = players[current].icon + ' ã®ç•ªï¼ˆãŠé‡‘:' + players[current].money + 'ï¼‰';
  }

  function checkGameEnd() {
    const finished = players.filter(p => p.age >= GOAL);
    if (finished.length === players.length) {
      let result = 'ğŸ‰ äººç”Ÿã‚²ãƒ¼ãƒ çµ‚äº†ï¼ ğŸ‰<br><br>';
      const ranking = [...players].sort((a,b)=>b.money-a.money);
      ranking.forEach((p,i)=>{
        const title = i===0 ? 'ğŸ‘‘ å¤§å¯Œè±ª' : i===1 ? 'ğŸ’¼ å®‰å®šäººç”Ÿ' : 'ğŸŒ± ã—ã‚ã‚ã›äººç”Ÿ';
        result += `${i+1}ä½ï¼š${p.icon}ï¼ˆãŠé‡‘ ${p.money}ï¼‰ ${title}<br>`;
      });
      document.getElementById('ending').innerHTML = result;
      document.getElementById('ending').style.display = 'block';
      document.getElementById('diceBtn').disabled = true;
    }
  }ä½ï¼š${p.icon}ï¼ˆãŠé‡‘ ${p.money}ï¼‰<br>`;
      });
      document.getElementById('log').innerHTML = result;
      document.getElementById('diceBtn').disabled = true;
    }
  }

  function log(t) {
    document.getElementById('log').innerHTML = t;
  }

  function showDice(v) {
    document.getElementById('diceResult').textContent = 'ğŸ² ' + v;
  }
</script>

</body>
</html>
