<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>äººç”Ÿã™ã”ã‚ãï¼ˆ2ã€œ5äººãƒ»ã‚¤ãƒ©ã‚¹ãƒˆä»˜ãï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: sans-serif; background:#f0f9ff; padding:12px }
    h1 { font-size:22px }
    #setup, #game { max-width:520px; margin:auto }
    #board {
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap:6px;
      margin-bottom:12px;
    }
    /* ã™ã”ã‚ãé“ã‚’ã‚¸ã‚°ã‚¶ã‚°ã«ã™ã‚‹ */
    .row-reverse {
      direction: rtl;
    }
    .cell { background:white; border-radius:10px; padding:6px; font-size:11px; min-height:70px }
    .event { font-size:10px; margin-top:2px }
    .icon { font-size:18px }
    .p0{background:#fde68a} .p1{background:#bbf7d0} .p2{background:#bfdbfe} .p3{background:#fbcfe8} .p4{background:#ddd6fe}
    button { padding:10px 16px; border-radius:999px; border:none; background:#2563eb; color:white; font-size:15px }
    input { padding:6px }
    #log { background:white; padding:10px; border-radius:10px; min-height:50px }
    #turn { font-weight:bold; margin-bottom:6px }
  </style>
</head>
<body>

<h1>ğŸ² äººç”Ÿã™ã”ã‚ãï¼ˆã‚¤ãƒ©ã‚¹ãƒˆä»˜ãï¼‰</h1>

<div id="setup">
  <p>ä½•äººã§éŠã¶ï¼Ÿï¼ˆ2ã€œ5äººï¼‰</p>
  <input type="number" id="playerCount" min="2" max="5" value="2" /> äºº
  <br><br>
  <button onclick="startGame()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
</div>

<div id="game" style="display:none">
  <p id="turn"></p>
  <div id="board"></div>
  <button onclick="rollDice()">ã‚µã‚¤ã‚³ãƒ­ã‚’ãµã‚‹</button>
  <div id="log"></div>
</div>

<script>
  const START = 20;
  const GOAL = 65;
  let players = [];
  const icons = ['ğŸ˜€','ğŸ˜','ğŸ‘§','ğŸ§‘â€ğŸ¦±','ğŸ¤–'];
  let current = 0;

  // ãƒã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆæœ€åˆã‹ã‚‰è¡¨ç¤ºï¼‰
  const events = {
    25: { icon: 'ğŸ’¼', text: 'æ˜‡é€²ï¼1ãƒã‚¹é€²ã‚€', move: 1 },
    28: { icon: 'ğŸ®', text: 'å¤œãµã‹ã—â€¦1å›ä¼‘ã¿', skip: 1 },
    30: { icon: 'ğŸ’', text: 'çµå©šï¼2ãƒã‚¹é€²ã‚€', move: 2 },
    35: { icon: 'ğŸ˜¢', text: 'è»¢è·å¤±æ•—â€¦1ãƒã‚¹æˆ»ã‚‹', move: -1 },
    40: { icon: 'ğŸ ', text: 'å®¶ã‚’è²·ã†ï¼1å›ä¼‘ã¿', skip: 1 },
    50: { icon: 'ğŸ“', text: 'å­ã©ã‚‚ç‹¬ç«‹ï¼2ãƒã‚¹é€²ã‚€', move: 2 },
    60: { icon: 'ğŸ§“', text: 'å®šå¹´ãŒè¿‘ã„â€¦ãã®ã¾ã¾' }
  };

  function startGame() {
    const count = Number(document.getElementById('playerCount').value);
    if (count < 2 || count > 5) return;

    players = [];
    for (let i = 0; i < count; i++) {
      players.push({ name: icons[i], age: START, skip: 0 });
    }

    document.getElementById('setup').style.display = 'none';
    document.getElementById('game').style.display = 'block';
    updateTurnText();
    drawBoard();
  }

  function drawBoard() {
    const board = document.getElementById('board');
    board.innerHTML = '';

    for (let i = START; i <= GOAL; i++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.innerHTML = `<strong>${i}æ­³</strong>`;

      if (events[i]) {
        cell.innerHTML += `<div class="icon">${events[i].icon}</div>`;
        cell.innerHTML += `<div class="event">${events[i].text}</div>`;
      }

      players.forEach((p, idx) => {
        if (p.age === i) {
          const m = document.createElement('div');
          m.className = 'p' + idx;
          m.textContent = p.name;
          cell.appendChild(m);
        }
      });

      board.appendChild(cell);
    }
  }
    }
  }

  function rollDice() {
    const p = players[current];

    if (p.skip > 0) {
      p.skip--;
      log(`${p.name}ã¯1å›ãŠä¼‘ã¿`);
      nextTurn();
      return;
    }

    const dice = Math.floor(Math.random() * 6) + 1;
    p.age += dice;
    log(`${p.name}ï¼š${dice}ãŒå‡ºãŸï¼`);

    const e = events[p.age];
    if (e) {
      log('ğŸ‘‰ ' + e.text);
      if (e.move) p.age += e.move;
      if (e.skip) p.skip = e.skip;
    }

    if (p.age >= GOAL) {
      p.age = GOAL;
      log(`ğŸ‰ ${p.name} ã‚´ãƒ¼ãƒ«ï¼`);
    }

    drawBoard();
    nextTurn();
  }

  function nextTurn() {
    current = (current + 1) % players.length;
    updateTurnText();
  }

  function updateTurnText() {
    document.getElementById('turn').textContent = `ğŸ‘‰ ${players[current].name} ã®ç•ª`;
  }

  function log(text) {
    document.getElementById('log').innerHTML = text;
  }
</script>

</body>
</html>
